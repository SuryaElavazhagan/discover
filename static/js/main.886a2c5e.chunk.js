(this.webpackJsonpdiscover=this.webpackJsonpdiscover||[]).push([[0],{111:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),i=a(6),u=(a(59),a(60),a(61),a(62),a(31)),l=Object(u.b)({name:"filter",initialState:{search:"",genre:[],type:"movie",year:[1900,(new Date).getFullYear()],rating:[0,5],movieGenres:[],tvGenres:[]},reducers:{changeType:function(e,t){e.type=t.payload,e.search="",e.genre=[],e.year=[1900,(new Date).getFullYear()],e.rating=[0,5]},changeGenre:function(e,t){e.genre=t.payload},changeSearch:function(e,t){e.search=t.payload},changeYear:function(e,t){e.year=t.payload},changeRating:function(e,t){e.rating=t.payload},changeMovieGenres:function(e,t){e.movieGenres=t.payload},changeTvGenres:function(e,t){e.tvGenres=t.payload}}}),o=l.reducer,p=l.actions,b=p.changeType,f=p.changeGenre,d=(p.changeSearch,p.changeYear),j=p.changeRating,g=p.changeMovieGenres,h=p.changeTvGenres,v=Object(u.a)({reducer:{filter:o}}),x=a(5),m=a.n(x),O=a(17),y=a(16),w=a(21),_=a(4),k=a(44),N=a.p+"static/media/search.f5d4cc57.svg",Y={popular:"Popular",trend:"Trend",new:"Newest",top:"Top rated"},S=a(2);var D=function(){var e=Object(_.g)();return Object(i.b)(),Object(S.jsxs)("header",{className:"flex justify-between items-center",children:[Object(S.jsx)(w.b,{to:"/",children:Object(S.jsx)("p",{className:"text-2xl text-white",children:"Discover"})}),Object(S.jsx)("nav",{children:Object(S.jsx)("ul",{className:"list-none flex",children:Object.keys(Y).map((function(t){return Object(S.jsx)("li",{className:Object(k.a)("font-bold","px-3","cursor-pointer",{"text-white":e.pathname==="/".concat(t),"text-blue-500":e.pathname!=="/".concat(t)}),children:Object(S.jsx)(w.b,{to:t,children:Y[t]})},t)}))})}),Object(S.jsxs)("div",{className:"flex",children:[Object(S.jsx)("img",{src:N,alt:"Search Icon"}),Object(S.jsx)("input",{type:"text",name:"search",placeholder:"SEARCH",className:"font-bold uppercase border-0 bg-gray-800 text-blue-500 outline-none select-none placeholder-blue-500",onChange:function(e){e.target.value.trim().length}})]})]})},P=a(46),C=a.n(P),G=a(47),M=a.n(G),R=a(32),T=a(48),F="https://api.themoviedb.org/3",E="https://image.tmdb.org/t/p/original",I="add494e96808c55b3ee7f940c9d5e5b6",L=a.n(T).a.create({timeout:4e3,baseURL:F});L.interceptors.request.use((function(e){return e.params=Object(R.a)(Object(R.a)({},e.params),{},{api_key:I}),e}));var V=a(20),B=a.n(V);function H(e){var t=B()(e.release_date).year();return{poster:(null===e||void 0===e?void 0:e.poster_path)?"".concat(E).concat(null===e||void 0===e?void 0:e.poster_path):"",id:e.id,title:e.title,rating:e.vote_average,year:t,genre:e.genre_ids}}function J(e,t){return q.apply(this,arguments)}function q(){return(q=Object(y.a)(m.a.mark((function e(t,a){var r,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",e.t0=t,e.next="popular"===e.t0?4:"trend"===e.t0?6:"new"===e.t0?8:"top"===e.t0?10:12;break;case 4:return r="movie/popular",e.abrupt("break",12);case 6:return r="trending/movie/week",e.abrupt("break",12);case 8:return r="movie/now_playing",e.abrupt("break",12);case 10:return r="movie/top_rated",e.abrupt("break",12);case 12:return e.next=14,L.get(r,{params:{page:a}});case 14:return n=e.sent,c=n.data,s=c.results.map(H),e.abrupt("return",{totalPages:c.total_pages,totalResults:c.total_results,page:c.page,items:s});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return U.apply(this,arguments)}function U(){return(U=Object(y.a)(m.a.mark((function e(t){var a,r,n,c,s,i,u,l,o,p,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.year,r=t.type,n=t.rating,c=t.page,s=t.genre,i="",e.t0=r,e.next="popular"===e.t0?5:"trend"===e.t0?7:"new"===e.t0?9:"top"===e.t0?11:13;break;case 5:return i="popularity.desc",e.abrupt("break",13);case 7:return i="vote_count.desc",e.abrupt("break",13);case 9:return i="release_date.desc",e.abrupt("break",13);case 11:return i="vote_average.desc",e.abrupt("break",13);case 13:return u=B()("1-1-".concat(a[0])).startOf("year").format("YYYY-MM-DD"),l=B()("1-1-".concat(a[1])).endOf("year").format("YYYY-MM-DD"),e.next=17,L.get("discover/movie",{params:{sort_by:i,"release_date.gte":u,"release_date.lte":l,"vote_average.gte":n[0],"vote_average.lte":n[1],page:c,with_genres:s.join(",")}});case 17:return o=e.sent,p=o.data,b=p.results.map(H),e.abrupt("return",{totalPages:p.total_pages,totalResults:p.total_results,page:p.page,items:b});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return K.apply(this,arguments)}function K(){return(K=Object(y.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("genre/movie/list");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.genres.map((function(e){return{label:e.name,value:e.id}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){var t=e.movie,a=e.genre;return Object(S.jsxs)("div",{className:"flex flex-col items-center",children:[Object(S.jsx)("img",{src:t.poster,alt:"Movie Poster",className:"w-60 h-96 object-contain"}),Object(S.jsx)("p",{className:"text-blue-500 font-bold py-1",children:t.title}),Object(S.jsxs)("p",{className:"text-gray-500 font-light text-sm",children:[a,", ",t.year]})]})};function W(e){var t=B()(e.first_air_date).year();return{poster:(null===e||void 0===e?void 0:e.poster_path)?"".concat(E).concat(null===e||void 0===e?void 0:e.poster_path):"",id:e.id,title:e.name,rating:e.vote_average,year:t,genre:e.genre_ids}}function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(y.a)(m.a.mark((function e(t,a){var r,n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",e.t0=t,e.next="popular"===e.t0?4:"trend"===e.t0?6:"new"===e.t0?8:"top"===e.t0?10:12;break;case 4:return r="tv/popular",e.abrupt("break",12);case 6:return r="trending/tv/week",e.abrupt("break",12);case 8:return r="tv/on_the_air",e.abrupt("break",12);case 10:return r="tv/top_rated",e.abrupt("break",12);case 12:return e.next=14,L.get(r,{params:{page:a}});case 14:return n=e.sent,c=n.data,s=c.results.map(W),e.abrupt("return",{totalPages:c.total_pages,totalResults:c.total_results,page:c.page,items:s});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(y.a)(m.a.mark((function e(t){var a,r,n,c,s,i,u,l,o,p,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.year,r=t.type,n=t.rating,c=t.page,s=t.genre,i="",e.t0=r,e.next="popular"===e.t0?5:"trend"===e.t0?7:"new"===e.t0?9:"top"===e.t0?11:13;break;case 5:return i="popularity.desc",e.abrupt("break",13);case 7:return i="vote_count.desc",e.abrupt("break",13);case 9:return i="release_date.desc",e.abrupt("break",13);case 11:return i="vote_average.desc",e.abrupt("break",13);case 13:return u=B()("1-1-".concat(a[0])).startOf("year").format("YYYY-MM-DD"),l=B()("1-1-".concat(a[1])).endOf("year").format("YYYY-MM-DD"),e.next=17,L.get("discover/tv",{params:{sort_by:i,"release_date.gte":u,"release_date.lte":l,"vote_average.gte":n[0],"vote_average.lte":n[1],page:c,with_genres:s.join(",")}});case 17:return o=e.sent,p=o.data,b=p.results.map(W),e.abrupt("return",{totalPages:p.total_pages,totalResults:p.total_results,page:p.page,items:b});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return ae.apply(this,arguments)}function ae(){return(ae=Object(y.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("/genre/tv/list");case 2:return t=e.sent,a=t.data,e.abrupt("return",a.genres.map((function(e){return{label:e.name,value:e.id}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=a(49),ne=[{label:"Movie",value:"movie"},{label:"TV Shows",value:"tv"}],ce=a.n(re)()(1900,(new Date).getFullYear()).map((function(e){return{label:e,value:e}}));function se(e,t,a){var r=0===e.length,n=1900===t[0]&&t[1]===(new Date).getFullYear(),c=0===a[0]&&5===a[1];return r&&n&&c}var ie=function(){var e=Object(_.g)(),t=Object(i.c)((function(e){return e.filter.type})),a=Object(i.c)((function(e){return e.filter.genre})),n=Object(i.c)((function(e){return e.filter.year})),c=Object(i.c)((function(e){return e.filter.rating})),s=Object(i.c)((function(e){return e.filter.movieGenres})),u=Object(i.c)((function(e){return e.filter.tvGenres})),l=Object(r.useState)(!1),o=Object(O.a)(l,2),p=o[0],b=o[1],f=Object(r.useState)(""),d=Object(O.a)(f,2),j=d[0],g=d[1],h=Object(r.useState)(0),v=Object(O.a)(h,2),x=v[0],w=v[1],k=Object(r.useState)({totalPages:0,page:0,totalResults:0,items:[]}),N=Object(O.a)(k,2),Y=N[0],D=N[1];function P(e){var a,r;return void 0!=e&&null!==(a=null===(r="movie"===t?s.find((function(t){return t.value===e})):u.find((function(t){return t.value===e})))||void 0===r?void 0:r.label)&&void 0!==a?a:""}function G(){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(m.a.mark((function r(){var s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,g(""),b(!0),s=e.pathname.substring(1),"movie"!==t){r.next=20;break}if(se(a,n,c)){r.next=13;break}return r.t0=D,r.next=9,A({page:x+1,type:s,genre:a,year:n,rating:c});case 9:r.t1=r.sent,(0,r.t0)(r.t1),r.next=18;break;case 13:return r.t2=D,r.next=16,J(s,x+1);case 16:r.t3=r.sent,(0,r.t2)(r.t3);case 18:r.next=33;break;case 20:if(se(a,n,c)){r.next=28;break}return r.t4=D,r.next=24,$({page:x+1,type:s,genre:a,year:n,rating:c});case 24:r.t5=r.sent,(0,r.t4)(r.t5),r.next=33;break;case 28:return r.t6=D,r.next=31,X(s,x+1);case 31:r.t7=r.sent,(0,r.t6)(r.t7);case 33:r.next=38;break;case 35:r.prev=35,r.t8=r.catch(0),g("Something went wrong! Please try again later.");case 38:return r.prev=38,b(!1),r.finish(38);case 41:case"end":return r.stop()}}),r,null,[[0,35,38,41]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){G()}),[e.pathname,t,x,a,n,c]),Object(r.useEffect)((function(){0!==x&&w(0)}),[e.pathname,t,a,n,c]),p?Object(S.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:Object(S.jsx)(C.a,{type:"Puff",height:100,width:100})}):j.length?Object(S.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-white",children:[j,Object(S.jsx)("button",{className:"px-8 py4 rounded-xl bg-white",onClick:G,children:"Retry"})]}):0===Y.totalResults?Object(S.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white",children:"No results found."}):Object(S.jsxs)("div",{className:"w-full h-full overflow-scroll",children:[Object(S.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Y.items.map((function(e){return Object(S.jsx)(Q,{movie:e,genre:P(e.genre[0])},e.id)}))}),Object(S.jsx)("div",{className:"my-8 flex justify-center",id:"react-paginate",children:Object(S.jsx)(M.a,{pageCount:Y.totalPages,initialPage:x,onPageChange:function(e){var t=e.selected;w(t)},pageRangeDisplayed:3,marginPagesDisplayed:3})})]})},ue=a(23),le=a(51);var oe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.filter.movieGenres})),a=Object(i.c)((function(e){return e.filter.tvGenres})),n=Object(i.c)((function(e){return e.filter.type})),c=Object(i.c)((function(e){return e.filter.year})),s=Object(r.useState)([]),u=Object(O.a)(s,2),l=u[0],o=u[1],p=Object(r.useState)(ce[0]),g=Object(O.a)(p,2),h=g[0],v=g[1],x=Object(r.useState)(ce[ce.length-1]),m=Object(O.a)(x,2),y=m[0],w=m[1];return Object(r.useEffect)((function(){o([])}),[n]),Object(S.jsxs)("aside",{className:"px-10 py-8 shadow-2xl w-96",children:[Object(S.jsx)("p",{className:"text-gray-500 my-2 pr-12 font-bold",children:"DISCOVER OPTIONS"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{className:"my-2 text-gray-500",children:"Type"}),Object(S.jsx)(ue.a,{defaultValue:ne[0],options:ne,onChange:function(t){null!==t&&e(b(t.value))}}),Object(S.jsx)("p",{className:"my-2 text-gray-500",children:"Genre"}),Object(S.jsx)(ue.a,{isMulti:!0,value:l,options:"movie"===n?t:a,onChange:function(t){e(f(t.map((function(e){return e.value})))),o(t)}}),Object(S.jsx)("p",{className:"my-2 text-gray-500",children:"Year"}),Object(S.jsxs)("div",{className:"flex items-center",children:[Object(S.jsx)(ue.a,{value:h,options:ce,className:"w-24",onChange:function(t){null!==t&&t.value<c[1]&&(e(d([t.value,c[1]])),v(t))}}),Object(S.jsx)("span",{className:"text-white mx-2",children:"-"}),Object(S.jsx)(ue.a,{value:y,options:ce,className:"w-24",onChange:function(t){null!==t&&t.value>c[0]&&(e(d([c[0],t.value])),w(t))}})]}),Object(S.jsx)("p",{className:"my-2 text-gray-500",children:"Ratings"}),Object(S.jsx)(le.a,{allowHalf:!0,allowClear:!0,onChange:function(t){e(j([t,5]))}}),Object(S.jsx)("span",{className:"mx-1 text-white",children:"& up"})]})]})};var pe=function(){var e=Object(i.b)();function t(){return(t=Object(y.a)(m.a.mark((function t(){var a,r,n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([z(),te()]);case 2:a=t.sent,r=Object(O.a)(a,2),n=r[0],c=r[1],e(g(n)),e(h(c));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){t.apply(this,arguments)}()}),[]),Object(S.jsx)(w.a,{children:Object(S.jsxs)(_.d,{children:[Object(S.jsx)(_.b,{exact:!0,path:"/",children:Object(S.jsx)(_.a,{to:"/popular"})}),Object(S.jsx)(_.b,{path:"*",children:Object(S.jsxs)("div",{className:"app flex bg-gray-800 w-screen\th-screen overflow-hidden",children:[Object(S.jsxs)("div",{className:"flex-1 p-6",children:[Object(S.jsx)(D,{}),Object(S.jsx)("div",{className:"p-6 w-full h-full",children:Object(S.jsx)(ie,{})})]}),Object(S.jsx)(oe,{})]})})]})})},be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,112)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(i.a,{store:v,children:Object(S.jsx)(pe,{})})}),document.getElementById("root")),be()},61:function(e,t,a){},62:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.886a2c5e.chunk.js.map